import{c as j,j as t,r}from"./client-DJA35wLz.js";var u;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(u||(u={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(T||(T={}));var d;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(d||(d={}));var m;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(m||(m={}));var S;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(S||(S={}));var R;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(R||(R={}));var x;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(x||(x={}));var c;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(c||(c={}));var L;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(L||(L={}));var M;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(M||(M={}));var D;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(D||(D={}));var p;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(p||(p={}));c.RECITATION,c.SAFETY,c.LANGUAGE;function H(){const[e,o]=r.useState("Write a friendly greeting."),[N,E]=r.useState(""),[_,i]=r.useState("idle"),[l,A]=r.useState([]),[O,U]=r.useState(null),[a,I]=r.useState("chat");function v(){if(O)return O;const n=chrome.runtime.connect({name:"agent"});return n.onMessage.addListener(s=>{(s==null?void 0:s.type)==="assistant_message"&&(A(C=>[...C,{role:"assistant",text:s.text}]),E(s.text))}),U(n),n}async function G(){var n;try{if(i("running"),A(Y=>[...Y,{role:"user",text:e}]),v().postMessage({type:"user_message",text:e}),!("ai"in window)||!((n=window.ai)!=null&&n.createTextSession)){E("Sent to agent. Waiting for response...");return}const f=await(await window.ai.createTextSession({topK:1,temperature:.2})).prompt(e);E(f)}catch(s){i("error"),E((s==null?void 0:s.message)||"Error")}finally{i("idle")}}async function h(){i("running"),chrome.runtime.sendMessage({type:"summarize_current_tab"},async n=>{if(!(n!=null&&n.ok))E((n==null?void 0:n.error)||"Failed to summarize");else{const s=(n.text||"").slice(0,500);E(`Title: ${n.title}

${s}`)}i("idle")})}return t.jsx("div",{className:"w-[380px] p-3 text-[color:var(--text)]",style:{fontFamily:"Inter, system-ui, Arial"},children:t.jsxs("div",{className:"nm-panel",children:[t.jsxs("div",{className:"nm-header",children:[t.jsxs("div",{className:"nm-brand",children:[t.jsx("div",{className:"nm-badge"}),t.jsx("span",{className:"font-semibold",children:"NanoMariner"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"nm-tabs",children:[t.jsx("button",{className:`nm-tab ${a==="chat"?"active":""}`,onClick:()=>I("chat"),children:"Chat"}),t.jsx("button",{className:`nm-tab ${a==="tasks"?"active":""}`,onClick:()=>I("tasks"),children:"Tasks"}),t.jsx("button",{className:`nm-tab ${a==="history"?"active":""}`,onClick:()=>I("history"),children:"History"})]}),t.jsx("button",{className:"nm-link",onClick:()=>chrome.runtime.openOptionsPage(),children:"Settings"})]})]}),a==="chat"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("textarea",{className:"nm-input resize-none",rows:4,value:e,onChange:n=>o(n.target.value),placeholder:"Ask anythingâ€¦"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"nm-btn",onClick:G,disabled:_==="running",children:"Send"}),t.jsx("button",{className:"nm-btn",onClick:h,disabled:_==="running",children:"Summarize tab"})]}),(N||l.length>0)&&t.jsxs("div",{className:"mt-2 space-y-2 max-h-56 overflow-auto pr-1",children:[l.map((n,s)=>t.jsx("div",{className:n.role==="user"?"text-[color:var(--muted)]":"",children:t.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:n.text})},s)),N&&t.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:N})]}),t.jsxs("div",{className:"nm-footer",children:[t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx("button",{className:"nm-link",onClick:()=>o("Give me 3 ideas to improve this page."),children:"Ideas"}),t.jsx("button",{className:"nm-link",onClick:()=>o("Summarize key points from this page."),children:"Summarize"}),t.jsx("button",{className:"nm-link",onClick:()=>o("Write a concise reply to the selected text."),children:"Reply"})]}),t.jsxs("div",{className:"text-xs text-[color:var(--muted)]",children:[t.jsx("span",{className:"nm-kbd",children:"Ctrl"})," + ",t.jsx("span",{className:"nm-kbd",children:"Enter"})]})]})]}),a==="tasks"&&t.jsx("div",{className:"text-sm text-[color:var(--muted)]",children:"No tasks yet. Actions you run will appear here."}),a==="history"&&t.jsx("div",{className:"text-sm text-[color:var(--muted)]",children:"Conversation history will show here."})]})})}const P=j(document.getElementById("root"));P.render(t.jsx(H,{}));
